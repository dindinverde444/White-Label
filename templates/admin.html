<!DOCTYPE html>
<html lang="pt-BR" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Admin - Gateway de Pagamentos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { 
            font-family: 'Inter', sans-serif; 
            background-color: #0a0a0b;
        }
        .bg-rublion-dark { background-color: #0a0a0b; }
        .bg-rublion-card { background-color: #161618; }
        .bg-rublion-sidebar { background-color: #1a1a1c; }
        .text-rublion-pink { color: #f472b6; }
        .bg-rublion-pink { background-color: #f472b6; }
        .border-rublion-pink { border-color: #f472b6; }
        .gradient-rublion { 
            background: linear-gradient(135deg, #f472b6, #ec4899, #be185d);
        }
        .gradient-admin { 
            background: linear-gradient(135deg, #dc2626, #ef4444, #b91c1c);
        }
        .table-dark { background-color: #161618; }
        .table-dark th { background-color: #1f1f23; }
    </style>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        rublion: {
                            dark: '#0a0a0b',
                            card: '#161618',
                            sidebar: '#1a1a1c',
                            pink: '#f472b6',
                            'pink-dark': '#ec4899',
                            'pink-darker': '#be185d'
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-rublion-dark text-white min-h-screen">
    <div class="flex h-screen">
        <!-- Sidebar -->
        <div class="w-64 bg-rublion-sidebar border-r border-gray-800 fixed h-full overflow-y-auto">
            <!-- Logo -->
            <div class="p-6 border-b border-gray-800">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 gradient-admin rounded-lg flex items-center justify-center">
                        <i data-lucide="shield" class="w-6 h-6 text-white"></i>
                    </div>
                    <div>
                        <h1 class="text-white font-bold text-lg">Gateway Admin</h1>
                        <p class="text-gray-400 text-sm">Painel Administrativo</p>
                    </div>
                </div>
            </div>

            <!-- Navigation -->
            <nav class="p-4 space-y-1">
                <a href="#dashboard" onclick="showSection('dashboard')" class="flex items-center space-x-3 px-4 py-3 rounded-lg bg-red-500/20 text-red-400 font-medium">
                    <i data-lucide="layout-dashboard" class="w-5 h-5"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#empresas" onclick="showSection('empresas')" class="flex items-center space-x-3 px-4 py-3 rounded-lg text-gray-300 hover:bg-gray-800 hover:text-white transition-colors">
                    <i data-lucide="building" class="w-5 h-5"></i>
                    <span>Empresas</span>
                </a>
                <a href="#aprovacoes" onclick="showSection('aprovacoes')" class="flex items-center space-x-3 px-4 py-3 rounded-lg text-gray-300 hover:bg-gray-800 hover:text-white transition-colors">
                    <i data-lucide="user-check" class="w-5 h-5"></i>
                    <span>Aprovações</span>
                </a>
                <a href="#arquivadas" onclick="showSection('arquivadas')" class="flex items-center space-x-3 px-4 py-3 rounded-lg text-gray-300 hover:bg-gray-800 hover:text-white transition-colors">
                    <i data-lucide="archive" class="w-5 h-5"></i>
                    <span>Contas Arquivadas</span>
                </a>
                <a href="#entradas" onclick="showSection('entradas')" class="flex items-center space-x-3 px-4 py-3 rounded-lg text-gray-300 hover:bg-gray-800 hover:text-white transition-colors">
                    <i data-lucide="arrow-down-circle" class="w-5 h-5"></i>
                    <span>Entradas</span>
                </a>
                <a href="#saidas" onclick="showSection('saidas')" class="flex items-center space-x-3 px-4 py-3 rounded-lg text-gray-300 hover:bg-gray-800 hover:text-white transition-colors">
                    <i data-lucide="arrow-up-circle" class="w-5 h-5"></i>
                    <span>Saídas</span>
                </a>
                <a href="#carteiras" onclick="showSection('carteiras')" class="flex items-center space-x-3 px-4 py-3 rounded-lg text-gray-300 hover:bg-gray-800 hover:text-white transition-colors">
                    <i data-lucide="wallet" class="w-5 h-5"></i>
                    <span>Carteiras</span>
                </a>
                <a href="#solicitacoes" onclick="showSection('solicitacoes')" class="flex items-center space-x-3 px-4 py-3 rounded-lg text-gray-300 hover:bg-gray-800 hover:text-white transition-colors">
                    <i data-lucide="clock" class="w-5 h-5"></i>
                    <span>Solicitações de Saque</span>
                </a>
                <a href="#adquirentes" onclick="showSection('adquirentes')" class="flex items-center space-x-3 px-4 py-3 rounded-lg text-gray-300 hover:bg-gray-800 hover:text-white transition-colors">
                    <i data-lucide="credit-card" class="w-5 h-5"></i>
                    <span>Adquirentes</span>
                </a>
                <a href="#taxas" onclick="showSection('taxas')" class="flex items-center space-x-3 px-4 py-3 rounded-lg text-gray-300 hover:bg-gray-800 hover:text-white transition-colors">
                    <i data-lucide="settings" class="w-5 h-5"></i>
                    <span>Taxas Globais</span>
                </a>
            </nav>

            <!-- User Profile -->
            <div class="absolute bottom-0 left-0 right-0 p-4 border-t border-gray-800">
                <div class="flex items-center space-x-3 mb-4">
                    <div class="w-10 h-10 gradient-admin rounded-full flex items-center justify-center">
                        <i data-lucide="user" class="w-5 h-5 text-white"></i>
                    </div>
                    <div class="flex-1 min-w-0">
                        <p class="text-white font-medium truncate">Administrador</p>
                        <p class="text-gray-400 text-sm truncate">admin@gateway.com</p>
                    </div>
                </div>
                <button onclick="logout()" class="w-full flex items-center justify-center space-x-2 px-4 py-2 bg-gray-800 hover:bg-gray-700 text-gray-300 hover:text-white rounded-lg transition-colors">
                    <i data-lucide="log-out" class="w-4 h-4"></i>
                    <span>Sair</span>
                </button>
            </div>
        </div>

        <!-- Main Content -->
        <div class="flex-1 ml-64 overflow-hidden">
            <!-- Header -->
            <header class="gradient-admin p-8">
                <div class="max-w-7xl mx-auto">
                    <h1 class="text-3xl font-bold text-white mb-2">
                        Painel Administrativo <span class="text-white/90">GATEWAY PAY</span>
                    </h1>
                    <p class="text-red-100">Controle total da plataforma de pagamentos</p>
                </div>
            </header>

            <!-- Dashboard Content -->
            <main class="flex-1 overflow-y-auto p-8">
                <!-- Dashboard Section -->
                <div id="dashboard-section" class="section-content">
                    <!-- KPIs Principais -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="bg-rublion-card rounded-xl p-6 border border-gray-800">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-lg font-semibold text-white">Lucro da Plataforma</h3>
                                <div class="w-10 h-10 bg-green-500 rounded-lg flex items-center justify-center">
                                    <i data-lucide="trending-up" class="w-5 h-5 text-white"></i>
                                </div>
                            </div>
                            <p class="text-3xl font-bold text-green-400 mb-2" id="lucroPlataforma">R$ 0,00</p>
                            <p class="text-sm text-gray-400">+18% vs mês anterior</p>
                        </div>

                        <div class="bg-rublion-card rounded-xl p-6 border border-gray-800">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-lg font-semibold text-white">Faturamento Bruto</h3>
                                <div class="w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center">
                                    <i data-lucide="dollar-sign" class="w-5 h-5 text-white"></i>
                                </div>
                            </div>
                            <p class="text-3xl font-bold text-blue-400 mb-2" id="faturamentoBruto">R$ 0,00</p>
                            <p class="text-sm text-gray-400">Total antes de taxas</p>
                        </div>

                        <div class="bg-rublion-card rounded-xl p-6 border border-gray-800">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-lg font-semibold text-white">Vendas Aprovadas</h3>
                                <div class="w-10 h-10 bg-purple-500 rounded-lg flex items-center justify-center">
                                    <i data-lucide="check-circle" class="w-5 h-5 text-white"></i>
                                </div>
                            </div>
                            <p class="text-3xl font-bold text-purple-400 mb-2" id="vendasAprovadas">0</p>
                            <p class="text-sm text-gray-400">Este mês</p>
                        </div>

                        <div class="bg-rublion-card rounded-xl p-6 border border-gray-800">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-lg font-semibold text-white">Taxa de Conversão</h3>
                                <div class="w-10 h-10 bg-yellow-500 rounded-lg flex items-center justify-center">
                                    <i data-lucide="percent" class="w-5 h-5 text-white"></i>
                                </div>
                            </div>
                            <p class="text-3xl font-bold text-yellow-400 mb-2" id="taxaConversao">0%</p>
                            <p class="text-sm text-gray-400">Média geral</p>
                        </div>
                    </div>

                    <!-- Gráficos -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                        <!-- Gráfico de Faturamento -->
                        <div class="bg-rublion-card rounded-xl p-6 border border-gray-800">
                            <div class="flex items-center justify-between mb-6">
                                <h3 class="text-lg font-semibold text-white">Faturamento por Período</h3>
                                <div class="flex space-x-2">
                                    <button onclick="changeAdminChartFilter('semana')" class="px-3 py-1 bg-red-500 text-white text-sm rounded-lg">Semana</button>
                                    <button onclick="changeAdminChartFilter('mes')" class="px-3 py-1 text-gray-400 hover:text-white text-sm rounded-lg">Mês</button>
                                </div>
                            </div>
                            <div class="h-64">
                                <canvas id="revenueChart"></canvas>
                            </div>
                        </div>

                        <!-- Taxa de Conversão por Método -->
                        <div class="bg-rublion-card rounded-xl p-6 border border-gray-800">
                            <h3 class="text-lg font-semibold text-white mb-6">Conversão por Método</h3>
                            <div class="space-y-4">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-4 h-4 bg-blue-500 rounded"></div>
                                        <span class="text-gray-300">PIX</span>
                                    </div>
                                    <div class="flex items-center space-x-3">
                                        <div class="w-32 bg-gray-700 rounded-full h-2">
                                            <div class="bg-blue-500 h-2 rounded-full" style="width: 98%"></div>
                                        </div>
                                        <span class="text-white font-medium">98%</span>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-4 h-4 bg-purple-500 rounded"></div>
                                        <span class="text-gray-300">Cartão</span>
                                    </div>
                                    <div class="flex items-center space-x-3">
                                        <div class="w-32 bg-gray-700 rounded-full h-2">
                                            <div class="bg-purple-500 h-2 rounded-full" style="width: 92%"></div>
                                        </div>
                                        <span class="text-white font-medium">92%</span>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-4 h-4 bg-orange-500 rounded"></div>
                                        <span class="text-gray-300">Boleto</span>
                                    </div>
                                    <div class="flex items-center space-x-3">
                                        <div class="w-32 bg-gray-700 rounded-full h-2">
                                            <div class="bg-orange-500 h-2 rounded-full" style="width: 87%"></div>
                                        </div>
                                        <span class="text-white font-medium">87%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Top Sellers -->
                    <div class="bg-rublion-card rounded-xl p-6 border border-gray-800">
                        <h3 class="text-lg font-semibold text-white mb-6">Top Sellers</h3>
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead>
                                    <tr class="border-b border-gray-700">
                                        <th class="text-left py-3 px-4 text-gray-400 font-medium">Seller</th>
                                        <th class="text-left py-3 px-4 text-gray-400 font-medium">Faturamento</th>
                                        <th class="text-left py-3 px-4 text-gray-400 font-medium">Lucro Gerado</th>
                                        <th class="text-left py-3 px-4 text-gray-400 font-medium">Vendas</th>
                                        <th class="text-left py-3 px-4 text-gray-400 font-medium">Taxa Conversão</th>
                                    </tr>
                                </thead>
                                <tbody id="topSellersTable">
                                    <!-- Dados serão carregados via JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Outras seções serão mostradas/ocultadas via JavaScript -->
                <div id="empresas-section" class="section-content hidden">
                    <div class="bg-rublion-card rounded-xl p-6 border border-gray-800">
                        <h2 class="text-2xl font-bold text-white mb-6">Gestão de Empresas</h2>
                        <p class="text-gray-400 mb-4">Lista completa de sellers cadastrados na plataforma</p>
                        <!-- Conteúdo da seção empresas -->
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead>
                                    <tr class="border-b border-gray-700">
                                        <th class="text-left py-3 px-4 text-gray-400 font-medium">Empresa</th>
                                        <th class="text-left py-3 px-4 text-gray-400 font-medium">Status</th>
                                        <th class="text-left py-3 px-4 text-gray-400 font-medium">Faturamento</th>
                                        <th class="text-left py-3 px-4 text-gray-400 font-medium">Data Cadastro</th>
                                        <th class="text-left py-3 px-4 text-gray-400 font-medium">Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="topSellersTable">
                                    <!-- Dados carregados dinamicamente -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div id="aprovacoes-section" class="section-content hidden">
                    <div class="bg-rublion-card rounded-xl p-6 border border-gray-800">
                        <div class="flex items-center justify-between mb-6">
                            <div>
                                <h2 class="text-2xl font-bold text-white mb-2">Aprovação de Usuários</h2>
                                <p class="text-gray-400">Gerencie as solicitações de conta pendentes</p>
                            </div>
                            <button onclick="loadPendingUsers()" class="bg-red-500 hover:bg-red-600 px-4 py-2 rounded-lg text-white transition-colors">
                                <i data-lucide="refresh-cw" class="w-4 h-4 inline mr-2"></i>
                                Atualizar
                            </button>
                        </div>

                        <!-- Lista de usuários pendentes -->
                        <div id="pending-users-container">
                            <div class="text-center py-8">
                                <i data-lucide="loader" class="w-8 h-8 text-gray-400 mx-auto mb-4 animate-spin"></i>
                                <p class="text-gray-400">Carregando usuários pendentes...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="arquivadas-section" class="section-content hidden">
                    <div class="bg-rublion-card rounded-xl p-6 border border-gray-800">
                        <div class="flex items-center justify-between mb-6">
                            <div>
                                <h2 class="text-2xl font-bold text-white mb-2">Contas Arquivadas</h2>
                                <p class="text-gray-400">Usuários rejeitados e arquivados</p>
                            </div>
                            <button onclick="loadArchivedUsers()" class="bg-red-500 hover:bg-red-600 px-4 py-2 rounded-lg text-white transition-colors">
                                <i data-lucide="refresh-cw" class="w-4 h-4 inline mr-2"></i>
                                Atualizar
                            </button>
                        </div>

                        <!-- Lista de usuários arquivados -->
                        <div id="archived-users-container">
                            <div class="text-center py-8">
                                <i data-lucide="loader" class="w-8 h-8 text-gray-400 mx-auto mb-4 animate-spin"></i>
                                <p class="text-gray-400">Carregando contas arquivadas...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Adicione outras seções aqui conforme necessário -->
                <div id="entradas-section" class="section-content hidden">
                    <div class="bg-rublion-card rounded-xl p-6 border border-gray-800">
                        <h2 class="text-2xl font-bold text-white mb-6">Entradas - Registro de Vendas</h2>
                        <p class="text-gray-400 mb-4">Todas as vendas realizadas na plataforma</p>
                    </div>
                </div>

                <div id="saidas-section" class="section-content hidden">
                    <div class="bg-rublion-card rounded-xl p-6 border border-gray-800">
                        <h2 class="text-2xl font-bold text-white mb-6">Saídas - Histórico de Saques</h2>
                        <p class="text-gray-400 mb-4">Histórico completo de saques realizados</p>
                    </div>
                </div>

                <div id="carteiras-section" class="section-content hidden">
                    <div class="bg-rublion-card rounded-xl p-6 border border-gray-800">
                        <h2 class="text-2xl font-bold text-white mb-6">Carteiras - Saldos dos Usuários</h2>
                        <p class="text-gray-400 mb-4">Visualização de todos os saldos (positivos e negativos)</p>
                    </div>
                </div>

                <div id="solicitacoes-section" class="section-content hidden">
                    <div class="bg-rublion-card rounded-xl p-6 border border-gray-800">
                        <h2 class="text-2xl font-bold text-white mb-6">Solicitações de Saque</h2>
                        <p class="text-gray-400 mb-4">Painel de aprovação de solicitações pendentes</p>
                    </div>
                </div>

                <div id="adquirentes-section" class="section-content hidden">
                    <div class="space-y-6">
                        <!-- Header com Status de Conexão -->
                        <div class="bg-rublion-card rounded-xl p-6 border border-gray-800">
                            <div class="flex items-center justify-between mb-6">
                                <div>
                                    <h2 class="text-2xl font-bold text-white mb-2">Rapdyn Payments</h2>
                                    <p class="text-gray-400">Configuração e gerenciamento do adquirente Rapdyn</p>
                                </div>
                                <div id="rapyd-status" class="flex items-center space-x-2">
                                    <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                                    <span class="text-yellow-400 text-sm">Não configurado</span>
                                </div>
                            </div>

                            <!-- Configuração de Credenciais -->
                            <div class="bg-gray-800/50 rounded-lg p-4 mb-6">
                                <h3 class="text-lg font-semibold text-white mb-4">Configuração de API</h3>
                                <div class="bg-blue-500/10 border border-blue-500/20 rounded-lg p-3 mb-4">
                                    <div class="flex items-start space-x-3">
                                        <i data-lucide="info" class="w-5 h-5 text-blue-400 mt-0.5"></i>
                                        <div>
                                            <p class="text-blue-400 font-medium text-sm">Como obter seu token:</p>
                                            <ol class="text-blue-300 text-xs mt-1 space-y-1">
                                                <li>1. Acesse <a href="https://app.rapdyn.io" target="_blank" class="underline">app.rapdyn.io</a></li>
                                                <li>2. Faça login em sua conta</li>
                                                <li>3. Vá em configurações ou API</li>
                                                <li>4. Copie seu token de autorização</li>
                                            </ol>
                                        </div>
                                    </div>
                                </div>
                                <div class="mb-4">
                                    <label class="block text-sm font-medium text-gray-300 mb-2">Token de Autorização</label>
                                    <input type="password" id="rapdyn-token" 
                                           class="w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white"
                                           placeholder="seu_token_rapdyn_aqui" />
                                    <p class="text-xs text-gray-400 mt-1">Use o formato: Authorization: Bearer [SEU_TOKEN]</p>
                                </div>
                                <div class="flex space-x-3">
                                    <button onclick="testRapdynConnection()" 
                                            class="bg-blue-500 hover:bg-blue-600 px-4 py-2 rounded-lg text-white transition-colors">
                                        <i data-lucide="wifi" class="w-4 h-4 inline mr-2"></i>
                                        Testar Conexão
                                    </button>
                                    <button onclick="saveRapdynConfig()" 
                                            class="bg-green-500 hover:bg-green-600 px-4 py-2 rounded-lg text-white transition-colors">
                                        <i data-lucide="save" class="w-4 h-4 inline mr-2"></i>
                                        Salvar Configuração
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Métodos de Pagamento -->
                        <div class="bg-rublion-card rounded-xl p-6 border border-gray-800">
                            <div class="flex items-center justify-between mb-6">
                                <h3 class="text-lg font-semibold text-white">Métodos de Pagamento Disponíveis</h3>
                                <button onclick="loadPaymentMethods()" 
                                        class="bg-red-500 hover:bg-red-600 px-4 py-2 rounded-lg text-white transition-colors">
                                    <i data-lucide="refresh-cw" class="w-4 h-4 inline mr-2"></i>
                                    Atualizar Lista
                                </button>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">País</label>
                                    <select id="payment-methods-country" 
                                            class="w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white">
                                        <option value="BR">Brasil</option>
                                        <option value="US">Estados Unidos</option>
                                        <option value="GB">Reino Unido</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">Moeda</label>
                                    <select id="payment-methods-currency" 
                                            class="w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white">
                                        <option value="BRL">Real Brasileiro (BRL)</option>
                                        <option value="USD">Dólar Americano (USD)</option>
                                        <option value="EUR">Euro (EUR)</option>
                                    </select>
                                </div>
                            </div>

                            <!-- Lista de Métodos -->
                            <div id="payment-methods-container" class="space-y-3">
                                <div class="text-center py-8">
                                    <i data-lucide="credit-card" class="w-8 h-8 text-gray-400 mx-auto mb-4"></i>
                                    <p class="text-gray-400">Configure as credenciais para carregar métodos de pagamento</p>
                                </div>
                            </div>
                        </div>

                        <!-- Informações da API -->
                        <div class="bg-rublion-card rounded-xl p-6 border border-gray-800">
                            <h3 class="text-lg font-semibold text-white mb-4">Informações da Integração</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <h4 class="font-medium text-white mb-2">Países Suportados</h4>
                                    <div id="countries-info" class="text-gray-400">
                                        <i data-lucide="loader" class="w-4 h-4 inline mr-2 animate-spin"></i>
                                        Carregando...
                                    </div>
                                </div>
                                <div>
                                    <h4 class="font-medium text-white mb-2">Moedas Suportadas</h4>
                                    <div id="currencies-info" class="text-gray-400">
                                        <i data-lucide="loader" class="w-4 h-4 inline mr-2 animate-spin"></i>
                                        Carregando...
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Documentação e Links -->
                        <div class="bg-rublion-card rounded-xl p-6 border border-gray-800">
                            <h3 class="text-lg font-semibold text-white mb-4">Documentação e Recursos</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <a href="https://docs.rapyd.net/" target="_blank" 
                                   class="flex items-center p-3 bg-gray-800/50 rounded-lg hover:bg-gray-700/50 transition-colors">
                                    <i data-lucide="book" class="w-5 h-5 text-blue-400 mr-3"></i>
                                    <div>
                                        <p class="text-white font-medium">Documentação Oficial</p>
                                        <p class="text-gray-400 text-sm">Guias e referência da API</p>
                                    </div>
                                </a>
                                <a href="https://dashboard.rapyd.net/" target="_blank" 
                                   class="flex items-center p-3 bg-gray-800/50 rounded-lg hover:bg-gray-700/50 transition-colors">
                                    <i data-lucide="external-link" class="w-5 h-5 text-green-400 mr-3"></i>
                                    <div>
                                        <p class="text-white font-medium">Dashboard Rapyd</p>
                                        <p class="text-gray-400 text-sm">Painel oficial do Rapyd</p>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="taxas-section" class="section-content hidden">
                    <div class="bg-rublion-card rounded-xl p-6 border border-gray-800">
                        <h2 class="text-2xl font-bold text-white mb-6">Taxas Globais</h2>
                        <p class="text-gray-400 mb-4">Configuração de taxas aplicadas simultaneamente a todos os sellers</p>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script>
        let adminData = {};
        let revenueChart;
        let currentSection = 'dashboard';

        // Inicializar ícones Lucide e carregar dashboard
        document.addEventListener('DOMContentLoaded', function() {
            lucide.createIcons();
            loadAdminDashboard();
            
            // Remover atualizações automáticas para evitar recarregamentos desnecessários
            // setInterval(loadAdminDashboard, 30000);
        });

        // Função para carregar dados do dashboard admin
        async function loadAdminDashboard() {
            try {
                const token = localStorage.getItem('token');
                if (!token) {
                    window.location.href = '/login';
                    return;
                }

                const response = await fetch('/api/dashboard/admin', {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });

                if (response.ok) {
                    adminData = await response.json();
                    updateAdminDashboard();
                } else if (response.status === 401) {
                    localStorage.removeItem('token');
                    window.location.href = '/login';
                } else {
                    console.error('Erro ao carregar dashboard admin');
                    // Usar dados simulados se a API falhar
                    updateAdminDashboard();
                }
            } catch (error) {
                console.error('Erro:', error);
                // Usar dados simulados se a API falhar
                updateAdminDashboard();
            }
        }

        // Função para atualizar o dashboard admin
        function updateAdminDashboard() {
            // Atualizar KPIs com dados da API ou valores padrão
            const lucroPlataforma = adminData.lucro_plataforma || 0;
            const faturamentoBruto = adminData.faturamento_bruto || 0;
            const vendasAprovadas = adminData.vendas_aprovadas || 0;
            const taxaConversao = adminData.taxa_conversao || 0;

            document.getElementById('lucroPlataforma').textContent = 
                new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(lucroPlataforma);
            
            document.getElementById('faturamentoBruto').textContent = 
                new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(faturamentoBruto);
            
            document.getElementById('vendasAprovadas').textContent = vendasAprovadas.toLocaleString('pt-BR');
            document.getElementById('taxaConversao').textContent = taxaConversao + '%';

            // Atualizar gráficos
            updateRevenueChart();
            updateTopSellersTable();
        }

        // Função para atualizar gráfico de faturamento
        function updateRevenueChart() {
            const ctx = document.getElementById('revenueChart').getContext('2d');
            if (revenueChart) revenueChart.destroy();
            
            // Dados reais de faturamento semanal (zerados até que haja dados reais)
            const weeklyData = [0, 0, 0, 0, 0, 0, 0];
            const labels = ['Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sab', 'Dom'];
            
            revenueChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Faturamento (R$)',
                        data: adminData.faturamento_semanal || weeklyData,
                        borderColor: '#dc2626',
                        backgroundColor: 'rgba(220, 38, 38, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: '#dc2626',
                        pointBorderColor: '#161618',
                        pointBorderWidth: 2,
                        pointRadius: 4,
                        pointHoverRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                display: true,
                                color: '#374151'
                            },
                            ticks: {
                                color: '#9CA3AF'
                            }
                        },
                        y: {
                            beginAtZero: true,
                            grid: {
                                display: true,
                                color: '#374151'
                            },
                            ticks: {
                                color: '#9CA3AF',
                                callback: function(value) {
                                    return 'R$ ' + (value/1000).toFixed(0) + 'k';
                                }
                            }
                        }
                    }
                }
            });
        }

        // Função para atualizar tabela de top sellers
        function updateTopSellersTable() {
            const tbody = document.getElementById('topSellersTable');
            tbody.innerHTML = '';

            // Dados reais de top sellers (vazio até que haja dados reais)
            const topSellers = [];

            const sellers = adminData.top_sellers || topSellers;
            
            if (sellers.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td colspan="5" class="py-8 px-4 text-center text-gray-400">
                        <i data-lucide="users" class="w-8 h-8 mx-auto mb-2"></i>
                        <p>Nenhum seller com vendas ainda</p>
                        <p class="text-sm">Os sellers aparecerão aqui quando começarem a vender</p>
                    </td>
                `;
                tbody.appendChild(row);
            } else {
                sellers.forEach(seller => {
                    const row = document.createElement('tr');
                    row.className = 'border-b border-gray-800 hover:bg-gray-800/50';
                    row.innerHTML = `
                        <td class="py-3 px-4 text-white font-medium">${seller.nome}</td>
                        <td class="py-3 px-4 text-white">${new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(seller.faturamento)}</td>
                        <td class="py-3 px-4 text-green-400 font-medium">${new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(seller.lucro)}</td>
                        <td class="py-3 px-4 text-white">${seller.vendas}</td>
                        <td class="py-3 px-4">
                            <span class="bg-${seller.conversao > 95 ? 'green' : seller.conversao > 90 ? 'yellow' : 'red'}-500/20 text-${seller.conversao > 95 ? 'green' : seller.conversao > 90 ? 'yellow' : 'red'}-400 px-2 py-1 rounded-full text-xs font-medium">
                                ${seller.conversao}%
                            </span>
                        </td>
                    `;
                    tbody.appendChild(row);
                });
            }
        }

        // Função para mostrar seções
        function showSection(sectionName) {
            // Ocultar todas as seções
            document.querySelectorAll('.section-content').forEach(section => {
                section.classList.add('hidden');
            });
            
            // Mostrar seção selecionada
            document.getElementById(sectionName + '-section').classList.remove('hidden');
            
            // Carregar dados específicos da seção
            if (sectionName === 'aprovacoes') {
                loadPendingUsers();
            } else if (sectionName === 'adquirentes') {
                                    loadRapdynInfo();
            }
            
            // Atualizar navegação ativa
            document.querySelectorAll('nav a').forEach(link => {
                link.className = 'flex items-center space-x-3 px-4 py-3 rounded-lg text-gray-300 hover:bg-gray-800 hover:text-white transition-colors';
            });
            
            document.querySelector(`a[href="#${sectionName}"]`).className = 'flex items-center space-x-3 px-4 py-3 rounded-lg bg-red-500/20 text-red-400 font-medium';
            
            currentSection = sectionName;
            
            // Re-inicializar ícones Lucide
            lucide.createIcons();
        }

        // Função para filtros do gráfico admin
        function changeAdminChartFilter(period) {
            // Remover classe ativa de todos os botões
            document.querySelectorAll('button[onclick^="changeAdminChartFilter"]').forEach(btn => {
                btn.className = 'px-3 py-1 text-gray-400 hover:text-white text-sm rounded-lg';
            });
            
            // Adicionar classe ativa ao botão clicado
            event.target.className = 'px-3 py-1 bg-red-500 text-white text-sm rounded-lg';
            
            // Implementar lógica para alterar dados do gráfico
            console.log('Filtro selecionado:', period);
            // Aqui você pode atualizar o gráfico com dados diferentes
        }

        // Funções para gerenciar usuários pendentes
        async function loadPendingUsers() {
            try {
                const token = localStorage.getItem('token');
                const response = await fetch('/api/admin/pending-users', {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });

                const data = await response.json();
                
                if (data.success) {
                    displayPendingUsers(data.users);
                } else {
                    console.error('Erro ao carregar usuários:', data.message);
                    document.getElementById('pending-users-container').innerHTML = `
                        <div class="text-center py-8">
                            <i data-lucide="alert-circle" class="w-8 h-8 text-red-400 mx-auto mb-4"></i>
                            <p class="text-red-400">Erro ao carregar usuários pendentes</p>
                        </div>
                    `;
                }
            } catch (error) {
                console.error('Erro:', error);
                document.getElementById('pending-users-container').innerHTML = `
                    <div class="text-center py-8">
                        <i data-lucide="wifi-off" class="w-8 h-8 text-red-400 mx-auto mb-4"></i>
                        <p class="text-red-400">Erro de conexão</p>
                    </div>
                `;
            }
        }

        function displayPendingUsers(users) {
            const container = document.getElementById('pending-users-container');
            
            if (users.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-8">
                        <i data-lucide="check-circle" class="w-8 h-8 text-green-400 mx-auto mb-4"></i>
                        <p class="text-gray-400">Nenhum usuário pendente no momento</p>
                    </div>
                `;
                return;
            }

            const usersHtml = users.map(user => `
                <div class="bg-gray-800/50 rounded-lg p-4 mb-4 border border-gray-700">
                    <div class="flex items-center justify-between">
                        <div class="flex-1">
                            <div class="flex items-center space-x-4 mb-3">
                                <div class="bg-gray-700 rounded-full p-2">
                                    <i data-lucide="user" class="w-5 h-5 text-gray-400"></i>
                                </div>
                                <div>
                                    <h3 class="text-white font-semibold">${user.username}</h3>
                                    <p class="text-gray-400 text-sm">${user.email}</p>
                                </div>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                                <div>
                                    <span class="text-gray-400">Tipo:</span>
                                    <span class="text-white ml-2 capitalize">${user.tipo}</span>
                                </div>
                                <div>
                                    <span class="text-gray-400">Status:</span>
                                    <span class="text-yellow-400 ml-2 capitalize">${user.status}</span>
                                </div>
                                <div>
                                    <span class="text-gray-400">Cadastro:</span>
                                    <span class="text-white ml-2">${new Date(user.created_at).toLocaleDateString('pt-BR')}</span>
                                </div>
                            </div>
                        </div>
                        <div class="flex space-x-2 ml-4">
                            <button onclick="approveUser(${user.id}, '${user.username}')" 
                                    class="bg-green-500 hover:bg-green-600 px-4 py-2 rounded-lg text-white transition-colors">
                                <i data-lucide="check" class="w-4 h-4 inline mr-1"></i>
                                Aprovar
                            </button>
                            <button onclick="rejectUser(${user.id}, '${user.username}')" 
                                    class="bg-red-500 hover:bg-red-600 px-4 py-2 rounded-lg text-white transition-colors">
                                <i data-lucide="x" class="w-4 h-4 inline mr-1"></i>
                                Rejeitar
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');

            container.innerHTML = usersHtml;
            lucide.createIcons();
        }

        async function approveUser(userId, username) {
            if (!confirm(`Tem certeza que deseja aprovar o usuário "${username}"?`)) {
                return;
            }

            try {
                const token = localStorage.getItem('token');
                const response = await fetch('/api/admin/approve-user', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify({ user_id: userId })
                });

                const data = await response.json();
                
                if (data.success) {
                    alert(`Usuário "${username}" aprovado com sucesso!`);
                    loadPendingUsers(); // Recarregar lista
                } else {
                    alert('Erro ao aprovar usuário: ' + data.message);
                }
            } catch (error) {
                console.error('Erro:', error);
                alert('Erro de conexão ao aprovar usuário');
            }
        }

        async function rejectUser(userId, username) {
            if (!confirm(`Tem certeza que deseja rejeitar o usuário "${username}"?`)) {
                return;
            }

            try {
                const token = localStorage.getItem('token');
                const response = await fetch('/api/admin/reject-user', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify({ user_id: userId })
                });

                const data = await response.json();
                
                if (data.success) {
                    alert(`Usuário "${username}" rejeitado.`);
                    loadPendingUsers(); // Recarregar lista
                } else {
                    alert('Erro ao rejeitar usuário: ' + data.message);
                }
            } catch (error) {
                console.error('Erro:', error);
                alert('Erro de conexão ao rejeitar usuário');
            }
        }

        // Funções para Contas Arquivadas
        async function loadArchivedUsers() {
            try {
                const token = localStorage.getItem('token');
                const response = await fetch('/api/admin/archived-users', {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });

                const data = await response.json();
                
                if (data.success) {
                    displayArchivedUsers(data.users);
                } else {
                    console.error('Erro ao carregar usuários arquivados:', data.message);
                    document.getElementById('archived-users-container').innerHTML = `
                        <div class="text-center py-8">
                            <i data-lucide="alert-circle" class="w-8 h-8 text-red-400 mx-auto mb-4"></i>
                            <p class="text-red-400">Erro ao carregar contas arquivadas</p>
                        </div>
                    `;
                }
            } catch (error) {
                console.error('Erro:', error);
                document.getElementById('archived-users-container').innerHTML = `
                    <div class="text-center py-8">
                        <i data-lucide="alert-circle" class="w-8 h-8 text-red-400 mx-auto mb-4"></i>
                        <p class="text-red-400">Erro de conexão</p>
                    </div>
                `;
            }
        }

        function displayArchivedUsers(users) {
            const container = document.getElementById('archived-users-container');
            
            if (!users || users.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-8">
                        <i data-lucide="archive" class="w-8 h-8 text-gray-400 mx-auto mb-4"></i>
                        <p class="text-gray-400">Nenhuma conta arquivada encontrada</p>
                    </div>
                `;
                return;
            }

            const usersHtml = users.map(user => `
                <div class="bg-gray-800/50 rounded-lg p-4 mb-4 border border-gray-700">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-4">
                            <div class="w-12 h-12 bg-red-500/20 rounded-full flex items-center justify-center">
                                <i data-lucide="user-x" class="w-6 h-6 text-red-400"></i>
                            </div>
                            <div>
                                <h3 class="text-white font-semibold">${user.username}</h3>
                                <p class="text-gray-400 text-sm">${user.email}</p>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                            <div>
                                <span class="text-gray-400">Tipo:</span>
                                <span class="text-white ml-2 capitalize">${user.tipo}</span>
                            </div>
                            <div>
                                <span class="text-gray-400">Status:</span>
                                <span class="text-red-400 ml-2 capitalize">${user.status}</span>
                            </div>
                            <div>
                                <span class="text-gray-400">Cadastro:</span>
                                <span class="text-white ml-2">${new Date(user.created_at).toLocaleDateString('pt-BR')}</span>
                            </div>
                        </div>
                    </div>
                    <div class="flex space-x-2 mt-4">
                        <button onclick="viewUserDetails(${user.id})" 
                                class="bg-blue-500 hover:bg-blue-600 px-4 py-2 rounded-lg text-white transition-colors">
                            <i data-lucide="eye" class="w-4 h-4 inline mr-1"></i>
                            Ver Detalhes
                        </button>
                        <button onclick="deleteUser(${user.id}, '${user.username}')" 
                                class="bg-red-500 hover:bg-red-600 px-4 py-2 rounded-lg text-white transition-colors">
                            <i data-lucide="trash-2" class="w-4 h-4 inline mr-1"></i>
                            Excluir Definitivamente
                        </button>
                    </div>
                </div>
            `).join('');

            container.innerHTML = usersHtml;
            lucide.createIcons();
        }

        async function deleteUser(userId, username) {
            if (!confirm(`ATENÇÃO: Esta ação é irreversível!\n\nTem certeza que deseja excluir definitivamente o usuário "${username}"?\n\nTodos os dados serão perdidos permanentemente.`)) {
                return;
            }

            try {
                const token = localStorage.getItem('token');
                const response = await fetch('/api/admin/delete-user', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify({ user_id: userId })
                });

                const data = await response.json();
                
                if (data.success) {
                    alert(`Usuário "${username}" excluído definitivamente.`);
                    loadArchivedUsers(); // Recarregar lista
                } else {
                    alert('Erro ao excluir usuário: ' + data.message);
                }
            } catch (error) {
                console.error('Erro:', error);
                alert('Erro de conexão ao excluir usuário');
            }
        }

        async function viewUserDetails(userId) {
            try {
                const token = localStorage.getItem('token');
                const response = await fetch(`/api/admin/user-details/${userId}`, {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });

                const data = await response.json();
                
                if (data.success) {
                    showUserDetailsModal(data.user);
                } else {
                    alert('Erro ao carregar detalhes: ' + data.message);
                }
            } catch (error) {
                console.error('Erro:', error);
                alert('Erro de conexão ao carregar detalhes');
            }
        }

        function showUserDetailsModal(user) {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-rublion-card rounded-xl p-8 max-w-4xl w-full mx-4 border border-gray-800 max-h-[90vh] overflow-y-auto">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-xl font-bold text-white">Detalhes do Usuário</h3>
                        <button onclick="this.closest('.fixed').remove()" class="text-gray-400 hover:text-white">
                            <i data-lucide="x" class="w-6 h-6"></i>
                        </button>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Informações Básicas -->
                        <div class="bg-gray-800/50 rounded-lg p-4">
                            <h4 class="text-lg font-semibold text-white mb-4">Informações Básicas</h4>
                            <div class="space-y-2 text-sm">
                                <div><span class="text-gray-400">ID:</span> <span class="text-white">${user.id}</span></div>
                                <div><span class="text-gray-400">Username:</span> <span class="text-white">${user.username}</span></div>
                                <div><span class="text-gray-400">Email:</span> <span class="text-white">${user.email}</span></div>
                                <div><span class="text-gray-400">Tipo:</span> <span class="text-white capitalize">${user.tipo}</span></div>
                                <div><span class="text-gray-400">Status:</span> <span class="text-red-400 capitalize">${user.status}</span></div>
                                <div><span class="text-gray-400">Cadastro:</span> <span class="text-white">${new Date(user.created_at).toLocaleString('pt-BR')}</span></div>
                            </div>
                        </div>

                        <!-- Dados KYC -->
                        <div class="bg-gray-800/50 rounded-lg p-4">
                            <h4 class="text-lg font-semibold text-white mb-4">Dados KYC</h4>
                            ${user.kyc ? `
                                <div class="space-y-2 text-sm">
                                    <div><span class="text-gray-400">Tipo Pessoa:</span> <span class="text-white">${user.kyc[2] || 'N/A'}</span></div>
                                    <div><span class="text-gray-400">Nome/Razão Social:</span> <span class="text-white">${user.kyc[3] || 'N/A'}</span></div>
                                    <div><span class="text-gray-400">CPF/CNPJ:</span> <span class="text-white">${user.kyc[4] || 'N/A'}</span></div>
                                    <div><span class="text-gray-400">Telefone:</span> <span class="text-white">${user.kyc[6] || 'N/A'}</span></div>
                                    <div><span class="text-gray-400">Status KYC:</span> <span class="text-white">${user.kyc[23] || 'N/A'}</span></div>
                                </div>
                            ` : '<p class="text-gray-400 text-sm">Nenhum dado KYC encontrado</p>'}
                        </div>
                    </div>

                    <!-- Logs -->
                    <div class="mt-6 bg-gray-800/50 rounded-lg p-4">
                        <h4 class="text-lg font-semibold text-white mb-4">Histórico de Ações</h4>
                        ${user.logs && user.logs.length > 0 ? `
                            <div class="space-y-2 max-h-40 overflow-y-auto">
                                ${user.logs.map(log => `
                                    <div class="flex items-center justify-between text-sm">
                                        <span class="text-white">${log.acao}</span>
                                        <span class="text-gray-400">${new Date(log.created_at).toLocaleString('pt-BR')}</span>
                                    </div>
                                `).join('')}
                            </div>
                        ` : '<p class="text-gray-400 text-sm">Nenhum log encontrado</p>'}
                    </div>

                    <div class="flex justify-end mt-6 pt-6 border-t border-gray-700">
                        <button onclick="this.closest('.fixed').remove()" 
                                class="bg-gray-700 hover:bg-gray-600 px-6 py-2 rounded-lg text-white transition-colors">
                            Fechar
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            lucide.createIcons();
        }

        // Funções Rapdyn Payments
        async function testRapdynConnection() {
            const token = document.getElementById('rapdyn-token').value;
            
            if (!token) {
                alert('Por favor, insira o token de autorização');
                return;
            }
            
            try {
                const authToken = localStorage.getItem('token');
                const response = await fetch('/api/admin/rapdyn/test-connection', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${authToken}`
                    },
                    body: JSON.stringify({
                        token: token
                    })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    updateRapdynStatus('connected', data.message);
                    alert(`✅ ${data.message}`);
                } else {
                    updateRapdynStatus('error', data.message);
                    alert(`❌ ${data.message}`);
                }
                
            } catch (error) {
                console.error('Erro:', error);
                updateRapdynStatus('error', 'Erro de conexão');
                alert('Erro de conexão ao testar token');
            }
        }
        
        async function saveRapdynConfig() {
            const token = document.getElementById('rapdyn-token').value;
            
            if (!token) {
                alert('Por favor, insira o token de autorização');
                return;
            }
            
            try {
                const authToken = localStorage.getItem('token');
                const response = await fetch('/api/admin/rapdyn/configure', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${authToken}`
                    },
                    body: JSON.stringify({
                        token: token
                    })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    updateRapdynStatus('configured', data.message);
                    alert('✅ Configurações salvas com sucesso!');
                    loadRapdynInfo();
                } else {
                    alert(`❌ ${data.message}`);
                }
                
            } catch (error) {
                console.error('Erro:', error);
                alert('Erro de conexão ao salvar configurações');
            }
        }
        
        async function loadPaymentMethods() {
            try {
                const token = localStorage.getItem('token');
                const response = await fetch('/api/admin/rapdyn/payment-methods', {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });
                
                const data = await response.json();
                displayPaymentMethods(data);
                
            } catch (error) {
                console.error('Erro:', error);
                document.getElementById('payment-methods-container').innerHTML = `
                    <div class="text-center py-8">
                        <i data-lucide="alert-circle" class="w-8 h-8 text-red-400 mx-auto mb-4"></i>
                        <p class="text-red-400">Erro ao carregar métodos de pagamento</p>
                    </div>
                `;
            }
        }
        
        function displayPaymentMethods(data) {
            const container = document.getElementById('payment-methods-container');
            
            if (!data.success || !data.data) {
                container.innerHTML = `
                    <div class="text-center py-8">
                        <i data-lucide="info" class="w-8 h-8 text-blue-400 mx-auto mb-4"></i>
                        <p class="text-gray-400">Nenhum método de pagamento encontrado</p>
                        <p class="text-xs text-gray-500 mt-2">${data.error || 'Configure o token Rapdyn'}</p>
                    </div>
                `;
                return;
            }
            
            // Adaptar para estrutura do Rapdyn
            const methods = Array.isArray(data.data) ? data.data : [data.data];
            const methodsHtml = methods.slice(0, 10).map(method => `
                <div class="bg-gray-800/50 rounded-lg p-4 flex items-center justify-between">
                    <div class="flex items-center space-x-4">
                        <div class="w-12 h-8 bg-gradient-to-r from-purple-500 to-pink-500 rounded flex items-center justify-center">
                            <i data-lucide="credit-card" class="w-4 h-4 text-white"></i>
                        </div>
                        <div>
                            <h4 class="text-white font-medium">${method.name || method.type || 'Rapdyn Payment'}</h4>
                            <p class="text-gray-400 text-sm">${method.description || method.category || 'Método de Pagamento'}</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <span class="text-green-400 text-sm font-medium">
                            ${method.status || 'Ativo'}
                        </span>
                        <p class="text-gray-400 text-xs">
                            ${method.currency || method.flow_type || 'BRL'}
                        </p>
                    </div>
                </div>
            `).join('');
            
            container.innerHTML = methodsHtml;
            lucide.createIcons();
        }
        
        async function loadRapdynInfo() {
            try {
                // Carregar métodos de pagamento
                await loadPaymentMethods();
                
                // Para Rapdyn, vamos mostrar informações estáticas
                document.getElementById('countries-info').innerHTML = 
                    '<span class="text-green-400">Brasil (Principal)</span>';
                
                document.getElementById('currencies-info').innerHTML = 
                    '<span class="text-green-400">BRL, USD (Suportadas)</span>';
                
            } catch (error) {
                console.error('Erro ao carregar info:', error);
                document.getElementById('countries-info').innerHTML = 
                    '<span class="text-red-400">Erro ao carregar</span>';
                document.getElementById('currencies-info').innerHTML = 
                    '<span class="text-red-400">Erro ao carregar</span>';
            }
        }
        
        function updateRapdynStatus(status, message) {
            const statusElement = document.getElementById('rapyd-status');
            const statusIcon = statusElement.querySelector('div');
            const statusText = statusElement.querySelector('span');
            
            switch (status) {
                case 'connected':
                    statusIcon.className = 'w-3 h-3 bg-green-500 rounded-full';
                    statusText.className = 'text-green-400 text-sm';
                    statusText.textContent = 'Conectado';
                    break;
                case 'configured':
                    statusIcon.className = 'w-3 h-3 bg-blue-500 rounded-full';
                    statusText.className = 'text-blue-400 text-sm';
                    statusText.textContent = 'Configurado';
                    break;
                case 'error':
                    statusIcon.className = 'w-3 h-3 bg-red-500 rounded-full';
                    statusText.className = 'text-red-400 text-sm';
                    statusText.textContent = 'Erro';
                    break;
                default:
                    statusIcon.className = 'w-3 h-3 bg-yellow-500 rounded-full';
                    statusText.className = 'text-yellow-400 text-sm';
                    statusText.textContent = 'Não configurado';
            }
        }

        // Função de logout
        function logout() {
            localStorage.removeItem('token');
            window.location.href = '/login';
        }
    </script>
</body>
</html>
